- defaults:
    link:
      relink: true
#      relative: true

- clean: ['~']

- link:
    ~/.bashrc: bashrc
    ~/.bashrc.d/01-systype.sh:
      create: true
      path: bashrc.d/01-systype.sh
    ~/.bashrc.d/10-prompt.sh:
      create: true
      path: bashrc.d/10-prompt.sh
    ~/.bashrc.d/75-editor.sh:
      create: true
      path: bashrc.d/75-editor.sh
    ~/.bashrc.d/80-completion.sh:
      create: true
      path: bashrc.d/80-completion.sh
    ~/.bashrc.d/85-ssh-agent.sh:
      create: true
      path: bashrc.d/85-ssh-agent.sh
    ~/.bashrc.d/99-misc.sh:
      create: true
      path: bashrc.d/99-misc.sh
    ~/.bash_aliases: bash_aliases
    ~/.bash_functions: bash_functions
    ~/.bash_profile: bash_profile
    ~/.bash-git-prompt: bash-git-prompt
    ~/.dircolors: dircolors-dark
    ~/.emacs: emacs
    ~/.emacs.d: emacs.d
    ~/Lisp/cedet: Lisp/cedet
    ~/Lisp/chef-mode.el: Lisp/chef-mode.el
    ~/Lisp/color-theme: Lisp/color-theme
    ~/Lisp/dash.el: Lisp/dash.el
    ~/Lisp/emacs-color-theme-solarized: Lisp/emacs-color-theme-solarized
    ~/Lisp/emacs-for-python: Lisp/emacs-for-python
    ~/Lisp/flycheck: Lisp/flycheck
    ~/Lisp/flymake-easy.el: Lisp/flymake-easy.el
    ~/Lisp/flymake-puppet.el: Lisp/flymake-puppet.el
    ~/Lisp/flymake-ruby.el: Lisp/flymake-ruby.el
    ~/Lisp/git-modes: Lisp/git-modes
    ~/Lisp/json-mode.el: Lisp/json-mode.el
    ~/Lisp/magit: Lisp/magit
    ~/Lisp/markdown-mode: Lisp/markdown-mode
    ~/Lisp/rubocop.el: Lisp/rubocop.el
    ~/Lisp/yaml-mode: Lisp/yaml-mode
    ~/.gitignore_global: gitignore_global
    ~/.gnupg/gpg.conf:
      create: true
      path: gpg.conf
    ~/.ssh/conf.d/00-base.conf:
      create: true
      path: ssh/conf.d/00-base.conf
    ~/.ssh/conf.d/60-loth.conf:
      create: true
      path: ssh/conf.d/60-loth.conf
    ~/.ssh/conf.d/60-misc.conf:
      create: true
      path: ssh/conf.d/60-misc.conf
    ~/.ssh/conf.d/99-wildcard.conf:
      create: true
      path: ssh/conf.d/99-wildcard.conf
    ~/.tmux.conf: tmux.conf
    ~/.vim: vim
    ~/.vimrc: vimrc

- shell:
  - [ git submodule update --init --recursive, Installing submodules]
  - [ test -f ~/.ssh/config || touch -t 197001010000 ~/.ssh/config, Creating ~/.ssh/config ]
  - [ chmod 700 ~/.ssh && chmod 700 ~/.ssh/conf.d && chmod 600 ~/.ssh/config, Updating ssh file permissions]
  - [ "if [ `find ~/.ssh/conf.d ! -type d -newer ~/.ssh/config -print | wc -l` -ne 0 ]; then cat ~/.ssh/conf.d/* > ~/.ssh/config; fi", Updating ssh configuration ]
