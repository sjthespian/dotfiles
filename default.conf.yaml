- defaults:
    link:
      relink: true
#      relative: true

- clean: ['~']

- link:
    ~/.bashrc: bashrc
    ~/.bash_aliases: bash_aliases
    ~/.bash_profile: bash_profile
    ~/.bash-git-prompt: bash-git-prompt
    ~/.dircolors: dircolors-dark
    ~/.emacs: emacs
    ~/.emacs.d: emacs.d
    ~/.gitignore_global: gitignore_global
    ~/.gnupg/gpg.conf:
      create: true
      path: gpg.conf
    ~/.ssh/config: ssh/config
    ~/.ssh/conf.d/00-base.conf:
      create: true
      path: ssh/conf.d/00-base.conf
    ~/.ssh/conf.d/60-loth.conf:
      create: true
      path: ssh/conf.d/60-loth.conf
    ~/.ssh/conf.d/60-misc.conf:
      create: true
      path: ssh/conf.d/60-misc.conf
    ~/.ssh/conf.d/99-wildcard.conf:
      create: true
      path: ssh/conf.d/99-wildcard.conf
    ~/.tmux.conf: tmux.conf
    ~/.vim: vim
    ~/.vimrc: vimrc

- shell:
  - [ git submodule update --init --recursive, Installing submodules]
  - [ chmod 700 ~/.ssh && chmod 700 ~/.ssh/conf.d && chmod 600 ~/.ssh/config, Updating ssh file permissions]
  - [ "if [ `find ~/.ssh/conf.d ! -type d -newer ~/.ssh/config -print | wc -l` -ne 0 ]; then cat ~/.ssh/conf.d/* > ~/.ssh/config; fi", Updating ssh configuration ]
